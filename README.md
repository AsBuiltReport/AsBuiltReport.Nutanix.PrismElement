<p align="center">
    <a href="https://www.powershellgallery.com/packages/AsBuiltReport.Nutanix.PrismElement/" alt="PowerShell Gallery Version">
        <img src="https://img.shields.io/powershellgallery/v/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
    <a href="https://www.powershellgallery.com/packages/AsBuiltReport.Nutanix.PrismElement/" alt="PS Gallery Downloads">
        <img src="https://img.shields.io/powershellgallery/dt/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
    <a href="https://www.powershellgallery.com/packages/AsBuiltReport.Nutanix.PrismElement/" alt="PS Platform">
        <img src="https://img.shields.io/powershellgallery/p/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
</p>
<p align="center">
    <a href="https://github.com/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/graphs/commit-activity" alt="GitHub Last Commit">
        <img src="https://img.shields.io/github/last-commit/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/master.svg" /></a>
    <a href="https://raw.githubusercontent.com/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/master/LICENSE" alt="GitHub License">
        <img src="https://img.shields.io/github/license/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
    <a href="https://github.com/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/graphs/contributors" alt="GitHub Contributors">
        <img src="https://img.shields.io/github/contributors/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement.svg"/></a>
</p>
<p align="center">
    <a href="https://twitter.com/AsBuiltReport" alt="Twitter">
            <img src="https://img.shields.io/twitter/follow/AsBuiltReport.svg?style=social"/></a>
</p>

# Nutanix Prism As Built Report

# Getting Started
Below are the instructions on how to install, configure and generate a Nutanix Prism As Built report.

## Pre-requisites
None

### Module Installation

Open a Windows PowerShell terminal window and install each of the required modules as follows;
```powershell
install-module AsBuiltReport
```

## Configuration
The Nutanix Prism As Built Report utilises a JSON file to allow configuration of report information, options, detail and healthchecks. 

A Nutanix Prism report configuration file can be generated by executing the following command;
```powershell
New-AsBuiltReportConfig -Report Nutanix.PrismElement -Path <User specified folder> -Name <Optional> 
```

Executing this command will copy the default Nutanix Prism report JSON configuration to a user specified folder. 

All report settings can then be configured via the JSON file.

The following provides information of how to configure each schema within the report's JSON file.

### Report
The **Report** sub-schema provides configuration of the Nutanix Prism report information

| Schema | Sub-Schema | Description |
| ------ | ---------- | ----------- |
| Report | Name | The name of the As Built Report
| Report | Version | The report version
| Report | Status | The report release status

### InfoLevel
The **InfoLevel** sub-schema allows configuration of each section of the report at a granular level. 

There are 4 levels (0-3) of detail granularity for each section as follows;

| Setting | InfoLevel | Description |
| :-------: | ---- | ----------- |
| 0 | Disabled | does not collect or display any information
| 1 | Summary | provides summarised information for a collection of objects
| 2 | Detailed | provides detailed information for a collection of objects
| 3 | Comprehensive | provides comprehensive information for individual objects


The following sections can be set

| Schema | Sub-Schema | Default Setting |
| ------ | ---------- | :---------------: |
| InfoLevel | Cluster | 1
| InfoLevel | System | 2
| InfoLevel | Hosts | 2
| InfoLevel | Storage | 2
| InfoLevel | VM | 2
| InfoLevel | DataProtection | 2

The following table outlines the information which will be shown based on the InfoLevel set

| InfoLevel | 1 | 2 | 3
| :--- | :---: | :---: | :---:
| **Cluster** |  |  |
| Controller VMs | x | x | x
| Hardware | x | x | x
| Network | x | x | x
| **System** | | |
| Alerts | x | x | x
| Authentication | x | x | x
| Filesystem Whitelists | x | x | x
| Licensing | x | x | x
| Licensing Features | | | x
| SMTP | x | x | x
| SNMP | x | x | x
| Syslog | x | x | x
| **Hosts** | | |
| Host Summary | x | | |
| Host Hardware  | | x | x
| Host Network | | x | x
| Host Disks (Detailed) | | x | 
| Host Disks (Comprehensive) | | | x
| **Storage** | | |
| Storage Pools | x | x | x
| Containers (Detailed) | x | x | 
| Containers (Comprehensive)| x | x | x
| **Virtual Machines** | | |
| Virtual Machines (Detailed) | x | x |
| Virtual Machines (Comprehensive) | | | x
| **Data Protection** | | |
| Protection Domains | x | x | x
| Protection Domain Replication | x | x | x
| Protection Domain Snapshots | x | x | x
| Unprotected VMs | x | x | x
| Remote Sites | x | x | x



## Known Issues
- Error message _"Unable to determine the identity of the domain"_ when saving a report. 
  - Issue relates to [Isolated Storage](http://rekiwi.blogspot.com/2008/12/unable-to-determine-identity-of-domain.html) and occurs when generating large reports. 
  - A workaround to this issue is to run the report using PowerShell ISE.
- In HTML documents, word-wrap of table cell contents is not working, causing the following issues;
  - Cell contents may overflow table columns
  - Tables may overflow page margin
  - [PScribo Issue #83](https://github.com/iainbrighton/PScribo/issues/83)

- In Word documents, some tables are not sized proportionately. To prevent cell overflow issues in HTML documents, most tables are auto-sized, this causes some tables to be out of proportion.
    
    - [PScribo Issue #83](https://github.com/iainbrighton/PScribo/issues/83)