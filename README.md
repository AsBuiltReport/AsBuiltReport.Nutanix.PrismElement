<p align="center">
    <a href="https://www.powershellgallery.com/packages/AsBuiltReport.Nutanix.PrismElement/" alt="PowerShell Gallery Version">
        <img src="https://img.shields.io/powershellgallery/v/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
    <a href="https://www.powershellgallery.com/packages/AsBuiltReport.Nutanix.PrismElement/" alt="PS Gallery Downloads">
        <img src="https://img.shields.io/powershellgallery/dt/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
    <a href="https://www.powershellgallery.com/packages/AsBuiltReport.Nutanix.PrismElement/" alt="PS Platform">
        <img src="https://img.shields.io/powershellgallery/p/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
</p>
<p align="center">
    <a href="https://github.com/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/graphs/commit-activity" alt="GitHub Last Commit">
        <img src="https://img.shields.io/github/last-commit/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/master.svg" /></a>
    <a href="https://raw.githubusercontent.com/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/master/LICENSE" alt="GitHub License">
        <img src="https://img.shields.io/github/license/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement.svg" /></a>
    <a href="https://github.com/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement/graphs/contributors" alt="GitHub Contributors">
        <img src="https://img.shields.io/github/contributors/AsBuiltReport/AsBuiltReport.Nutanix.PrismElement.svg"/></a>
</p>
<p align="center">
    <a href="https://twitter.com/AsBuiltReport" alt="Twitter">
            <img src="https://img.shields.io/twitter/follow/AsBuiltReport.svg?style=social"/></a>
</p>

# Nutanix Prism As Built Report

# Getting Started
Below are the instructions on how to install, configure and generate a Nutanix Prism As Built report.

## Supported AOS Versions
The Nutanix Prism Element As Built Report supports the following AOS versions;
- AOS 5.5
- AOS 5.10
- AOS 5.15

## Pre-requisites
None

### Module Installation

Open a Windows PowerShell terminal window and install the required modules as follows;
```powershell
install-module AsBuiltReport.Nutanix.PrismElement
```

## Configuration
The Nutanix Prism As Built Report utilises a JSON file to allow configuration of report information, options, detail and healthchecks. 

A Nutanix Prism report configuration file can be generated by executing the following command;
```powershell
New-AsBuiltReportConfig -Report Nutanix.PrismElement -Path <User specified folder> -Name <Optional> 
```

Executing this command will copy the default Nutanix Prism report JSON configuration to a user specified folder. 

All report settings can then be configured via the JSON file.

The following provides information of how to configure each schema within the report's JSON file.

### Report
The **Report** sub-schema provides configuration of the Nutanix Prism report information

| Schema | Sub-Schema | Description |
| ------ | ---------- | ----------- |
| Report | Name | The name of the As Built Report
| Report | Version | The report version
| Report | Status | The report release status

### InfoLevel
The **InfoLevel** sub-schema allows configuration of each section of the report at a granular level. 

There are 4 levels (0-3) of detail granularity for each section as follows;

| Setting | InfoLevel | Description |
| :-------: | ---- | ----------- |
| 0 | Disabled | does not collect or display any information
| 1 | Summary | provides summarised information for a collection of objects
| 2 | Detailed | provides detailed information for a collection of objects
| 3 | Comprehensive | provides comprehensive information for individual objects


The following sections can be set

| Schema | Sub-Schema | Default Setting |
| ------ | ---------- | :---------------: |
| InfoLevel | Cluster | 1
| InfoLevel | System | 2
| InfoLevel | Hosts | 2
| InfoLevel | Storage | 2
| InfoLevel | VM | 2
| InfoLevel | DataProtection | 2

## Examples 

```powershell
# Generate a Nutanix Prism Element As Built Report for Nutanix cluster '172.16.30.110' using specified credentials. Export report to HTML & DOCX formats. Use default report style. Append timestamp to report filename. Save reports to 'C:\Users\Tim\Documents'
PS C:\> New-AsBuiltReport -Report Nutanix.PrismElement -Target '172.16.30.110' -Username 'admin' -Password 'nutanix/4u' -Format Html,Word -OutputPath 'C:\Users\Tim\Documents' -Timestamp

# Generate a Nutanix Prism Element As Built Report for Nutanix cluster '172.16.30.110' using specified credentials and report configuration file. Export report to Text, HTML & DOCX formats. Use default report style. Save reports to 'C:\Users\Tim\Documents'. Display Verbose messages to the console.
PS C:\> New-AsBuiltReport -Report Nutanix.PrismElement -Target '172.16.30.110' -Username 'admin' -Password 'nutanix/4u' -Format Text,Html,Word -OutputPath 'C:\Users\Tim\Documents' -Verbose

# Generate a Nutanix Prism Element As Built Report for Nutanix cluster '172.16.30.110' using stored credentials. Export report to HTML & Text formats. Use default report style. Highlight environment issues within the report. Save reports to 'C:\Users\Tim\Documents'.
PS C:\> $Creds = Get-Credential
PS C:\> New-AsBuiltReport -Report Nutanix.PrismElement -Target '172.16.30.110' -Credential $Creds -Format Html,Text -OutputPath 'C:\Users\Tim\Documents' -EnableHealthCheck

# Generate a single Nutanix Prism Element As Built Report for Nutanix clusters '172.16.30.110' and '172.16.30.130' using specified credentials. Report exports to WORD format by default. Apply custom style to the report. Reports are saved to the user profile folder by default.
PS C:\> New-AsBuiltReport -Report Nutanix.PrismElement -Target '172.16.30.110','172.16.30.130' -Username 'admin' -Password 'nutanix/4u' -StylePath 'C:\Scripts\Styles\MyCustomStyle.ps1'

# Generate a Nutanix Prism Element As Built Report for Nutanix cluster '172.16.30.110' using specified credentials. Export report to HTML & DOCX formats. Use default report style. Reports are saved to the user profile folder by default. Attach and send reports via e-mail.
PS C:\> New-AsBuiltReport -Report VMware.vSphere -Target 'vcenter-01.corp.local' -Username 'admin' -Password 'nutanix/4u' -Format Html,Word -OutputPath 'C:\Users\Tim\Documents' -SendEmail
```